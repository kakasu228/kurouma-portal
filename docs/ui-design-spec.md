# Kurouma Portal - UI デザイン仕様書

> **バージョン:** v1.0
> **対象:** モバイルファースト・コンテンツ閲覧ポータル
> **スコープ:** UI のみ（進捗管理・タスク管理は将来拡張として除外）
> **更新日:** 2026-02-09

---

## 1. Design System

### 1-1. カラートークン

| トークン名 | 値 | 用途 |
|-----------|-----|------|
| `--color-primary` | `#3b82f6` | ボタン、アクティブNav、リンク、アクセント |
| `--color-primary-light` | `#eff6ff` | カテゴリカード背景、選択中フィルタ背景 |
| `--color-primary-dark` | `#2563eb` | ボタンhover/active |
| `--color-bg` | `#f9fafb` | ページ背景 |
| `--color-surface` | `#ffffff` | カード、BottomNav、ヘッダー |
| `--color-text` | `#111827` | 本文テキスト |
| `--color-text-secondary` | `#6b7280` | 補足テキスト、メタ情報 |
| `--color-text-tertiary` | `#9ca3af` | プレースホルダー、非アクティブNav |
| `--color-border` | `#e5e7eb` | カード枠線、セパレーター |
| `--color-success` | `#10b981` | 将来の完了ステータス用（今回未使用） |
| `--color-warning` | `#f59e0b` | 将来用（今回未使用） |

### 1-2. タイポグラフィ

| 用途 | フォント | サイズ | ウェイト | 行高 |
|------|---------|--------|---------|------|
| ページタイトル | Noto Sans JP | 20px | 700 (Bold) | 1.4 |
| セクション見出し | Noto Sans JP | 16px | 600 (SemiBold) | 1.5 |
| カードタイトル | Noto Sans JP | 15px | 500 (Medium) | 1.5 |
| 本文 | Noto Sans JP | 14px | 400 (Regular) | 1.75 |
| キャプション/メタ | Noto Sans JP | 12px | 400 (Regular) | 1.5 |
| BottomNavラベル | Noto Sans JP | 10px | 500 (Medium) | 1.2 |
| バッジ | Noto Sans JP | 11px | 500 (Medium) | 1.0 |

### 1-3. スペーシング

| トークン | 値 | 用途 |
|---------|-----|------|
| `--space-xs` | 4px | バッジ内padding、アイコンとテキスト間 |
| `--space-sm` | 8px | カード内要素間 |
| `--space-md` | 12px | リスト項目間 |
| `--space-base` | 16px | カード内padding、ページ左右余白 |
| `--space-lg` | 20px | セクション間 |
| `--space-xl` | 24px | ページ上部余白 |
| `--space-2xl` | 32px | 大セクション間 |

### 1-4. 角丸・影

| 要素 | border-radius | box-shadow |
|------|--------------|------------|
| カード | 12px | `0 1px 3px rgba(0,0,0,0.06)` |
| バッジ | 9999px (pill) | なし |
| ボタン | 8px | なし |
| BottomNav | 0（四角） | `0 -1px 3px rgba(0,0,0,0.06)` |
| 動画埋め込み | 8px | なし |
| アバター | 9999px (丸) | なし |

### 1-5. アイコン

- **ライブラリ:** Lucide React
- **サイズ:** 20px（一般）/ 24px（Nav）/ 16px（インライン）
- **ストローク幅:** 2px

### 1-6. カテゴリカラーマッピング

教材カテゴリごとにアクセントカラーを割り当て、視認性を高める。

| カテゴリ | ラベル | アイコン (Lucide) | カラー | 背景色 |
|---------|--------|------------------|--------|--------|
| `mindset` | マインドセット | `Brain` | `#8b5cf6` (violet) | `#f5f3ff` |
| `communication` | コミュニケーション | `MessageCircle` | `#3b82f6` (blue) | `#eff6ff` |
| `fashion` | ファッション | `Shirt` | `#ec4899` (pink) | `#fdf2f8` |
| `dating` | デーティング | `Heart` | `#ef4444` (red) | `#fef2f2` |
| `self-improvement` | 自分磨き | `Sparkles` | `#10b981` (green) | `#ecfdf5` |

---

## 2. ナビゲーション構造

### 2-1. BottomNav（固定下部ナビ）

```
┌──────────┬──────────┬──────────┬──────────┬──────────┐
│  🏠      │  📖      │  📅      │  ❓      │  👤      │
│ ホーム    │  教材    │  予定     │  FAQ    │ マイページ│
└──────────┴──────────┴──────────┴──────────┴──────────┘
```

| 位置 | ラベル | アイコン (Lucide) | 遷移先 |
|------|--------|------------------|--------|
| 1 | ホーム | `Home` | `/` |
| 2 | 教材 | `BookOpen` | `/lessons` |
| 3 | 予定 | `Calendar` | `/schedule` |
| 4 | FAQ | `HelpCircle` | `/faq` |
| 5 | マイページ | `User` | `/profile` |

**仕様:**
- 高さ: 64px + safe-area-inset-bottom
- 背景: `--color-surface` (白)
- 上部ボーダー: `1px solid --color-border`
- アクティブ: アイコン + ラベルが `--color-primary` に変化
- 非アクティブ: `--color-text-tertiary`
- タップ領域: 各タブ最低 48x48px

### 2-2. ページヘッダー

```
┌────────────────────────────────────┐
│  [←]  ページタイトル               │  ← 詳細ページのみ戻るボタン表示
└────────────────────────────────────┘
```

**仕様:**
- 高さ: 52px
- 背景: `--color-surface`
- 下部ボーダー: `1px solid --color-border`
- タイトル: 中央配置 or 左寄せ
- トップレベルページ（Home, Lessons, Schedule, FAQ, Profile）: 戻るボタンなし
- 詳細ページ（Lesson Detail）: 左に `ChevronLeft` 戻るボタン

### 2-3. ルーティング

| パス | ページ | ヘッダー | BottomNav |
|------|--------|---------|-----------|
| `/` | Home | 非表示（カスタムヘッダー） | 表示 |
| `/lessons` | Lessons | 「教材」 | 表示 |
| `/lessons/:id` | Lesson Detail | 「教材名」+ 戻るボタン | 非表示 |
| `/schedule` | Schedule | 「予定」 | 表示 |
| `/faq` | FAQ | 「よくある質問」 | 表示 |
| `/profile` | Profile | 非表示（カスタムヘッダー） | 表示 |

---

## 3. ページ別 UI 仕様

---

### 3-1. Home（ホーム）

**目的:** ポータルの入り口。挨拶 + カテゴリへの案内 + 最新/おすすめコンテンツへの導線。

```
┌─────────────────────────────────┐
│                                 │
│  こんにちは、田中さん 👋          │  ← 時間帯別挨拶
│  今日も一歩ずつ進みましょう       │  ← サブテキスト
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ カテゴリから探す              │  ← セクション見出し
│                                 │
│  ┌─────┐ ┌─────┐ ┌─────┐      │
│  │🧠   │ │💬   │ │👔   │      │  ← 横スクロール
│  │マイン│ │コミュ│ │ファッ│      │     カテゴリチップ
│  │ドセッ│ │ニケー│ │ション│      │
│  │ ト  │ │ション│ │     │      │
│  └─────┘ └─────┘ └─────┘      │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ おすすめ教材                  │  ← セクション見出し
│                                 │
│  ┌───────────────────────────┐  │
│  │ 💬 コミュニケーション        │  │  ← おすすめ教材カード 1
│  │ LINE返信の基本テクニック     │  │     (横幅フル)
│  │ 15分 ・ 動画あり             │  │
│  └───────────────────────────┘  │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 🧠 マインドセット           │  │  ← おすすめ教材カード 2
│  │ 自信を育てる3つの習慣       │  │
│  │ 10分 ・ 動画あり             │  │
│  └───────────────────────────┘  │
│                                 │
│  ┌───────────────────────────┐  │
│  │ ❤️ デーティング              │  │  ← おすすめ教材カード 3
│  │ 初回デートの会話プラン       │  │
│  │ 20分 ・ テキスト             │  │
│  └───────────────────────────┘  │
│                                 │
│        すべての教材を見る →      │  ← /lessons へリンク
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ 今後の予定                   │  ← セクション見出し
│                                 │
│  ┌───────────────────────────┐  │
│  │ 📅 2/15(土) 13:00-14:00   │  │  ← 直近1〜2件のみ
│  │ グループレッスン             │  │
│  │ LINE実践テクニック           │  │
│  └───────────────────────────┘  │
│                                 │
│        すべての予定を見る →      │  ← /schedule へリンク
│                                 │
├─────────────────────────────────┤
│                              64px│
│  [ホーム] [教材] [予定] [FAQ] [MP]│  ← BottomNav
└─────────────────────────────────┘
```

**各要素の仕様:**

| 要素 | 仕様 |
|------|------|
| **挨拶エリア** | 背景: `--color-surface`、padding: 24px 16px。`getGreeting()` + ユーザー名。サブテキストは `--color-text-secondary` |
| **カテゴリチップ** | 横スクロール（`overflow-x: auto`、`snap-x`）。各チップ: 幅80px、高さ80px、角丸12px、背景はカテゴリ色の`背景色`。アイコン(24px) + ラベル(12px)。タップで `/lessons?category=xxx` へ |
| **おすすめ教材カード** | カードUI。左にカテゴリアイコン(カテゴリ色)。タイトル(15px/500)、メタ情報(12px/400, secondary色)。タップで `/lessons/:id` へ。表示件数: 3件固定 |
| **今後の予定** | 直近1〜2件。日時 + タイプ + タイトル。タップで `/schedule` へ |
| **「すべて見る →」リンク** | テキストリンク。色: `--color-primary`。右寄せ。14px/500 |

---

### 3-2. Lessons（教材一覧）

**目的:** 全教材をカテゴリ別にフィルタして一覧表示。

```
┌─────────────────────────────────┐
│  教材                            │  ← PageHeader
├─────────────────────────────────┤
│                                 │
│  [すべて] [マインド] [コミュ]    │  ← フィルタ（横スクロール）
│  [ファッション] [デーティング]    │
│  [自分磨き]                      │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ マインドセット（3件）         │  ← カテゴリ見出し
│                                 │     （「すべて」選択時のみ表示）
│  ┌───────────────────────────┐  │
│  │ 🧠  自信を育てる3つの習慣   │  │  ← レッスンカード
│  │     10分 ・ 動画あり        │  │
│  └───────────────────────────┘  │
│  ┌───────────────────────────┐  │
│  │ 🧠  目標設定の技術          │  │
│  │     15分 ・ テキスト        │  │
│  └───────────────────────────┘  │
│                                 │
│  ■ コミュニケーション（4件）     │  ← 次のカテゴリ
│                                 │
│  ┌───────────────────────────┐  │
│  │ 💬  LINE返信の基本テクニック │  │
│  │     15分 ・ 動画あり        │  │
│  └───────────────────────────┘  │
│  ┌───────────────────────────┐  │
│  │ 💬  会話を広げる質問力      │  │
│  │     12分 ・ テキスト        │  │
│  └───────────────────────────┘  │
│  …                              │
│                                 │
│  ┌─ EmptyState ──────────────┐  │  ← 該当なし時
│  │  🔍                        │  │
│  │  教材が見つかりません        │  │
│  │  別のカテゴリを選んでみて    │  │
│  │  ください                   │  │
│  └───────────────────────────┘  │
│                                 │
├─────────────────────────────────┤
│  [ホーム] [教材] [予定] [FAQ] [MP]│
└─────────────────────────────────┘
```

**各要素の仕様:**

| 要素 | 仕様 |
|------|------|
| **フィルタバー** | 横スクロール。背景: `--color-surface`、下部ボーダー付き。sticky（ヘッダー直下に固定）。各チップ: pill形状、非選択=`--color-border`枠線 + 透明背景、選択=`--color-primary-light`背景 + `--color-primary`テキスト |
| **カテゴリ見出し** | 「すべて」フィルタ時: カテゴリ名 + 件数をセクション見出しとして表示。特定カテゴリ選択時: 見出し非表示、フラットにリスト |
| **レッスンカード** | 高さ: auto (コンテンツ依存)。左端にカテゴリアイコン（丸背景36px）。タイトル: 15px/500。メタ行: `{duration}分` `・` `{contentType}`。contentType は動画の有無で「動画あり」「テキスト」を表示。カード全体がタップ領域 → `/lessons/:id` へ |
| **メタ情報の contentType 判定** | `media[]` が存在する → 「動画あり」/ 存在しない → 「テキスト」 |

---

### 3-3. Lesson Detail（教材詳細）

**目的:** 1つの教材の全コンテンツ（テキスト・動画・添付）を閲覧する。

```
┌─────────────────────────────────┐
│  [←]  LINE返信の基本テクニック    │  ← PageHeader + 戻るボタン
├─────────────────────────────────┤
│                                 │
│  💬 コミュニケーション           │  ← カテゴリバッジ
│  15分                           │  ← 所要時間
│                                 │
├─────────────────────────────────┤
│                                 │
│  ┌───────────────────────────┐  │
│  │                           │  │
│  │    ▶ YouTube / Loom       │  │  ← 動画埋め込み（16:9）
│  │       埋め込み             │  │     あれば表示、なければ非表示
│  │                           │  │
│  └───────────────────────────┘  │
│                                 │
├─────────────────────────────────┤
│                                 │
│  本文テキストエリア              │  ← Google Docs の内容を
│                                 │     リッチテキストとして表示
│  見出し、段落、リスト、          │
│  太字、リンクなどを含む          │     HTML or Markdown を
│  フォーマット済みテキスト        │     レンダリング
│                                 │
│  ・箇条書き                     │
│  ・箇条書き                     │
│                                 │
│  「引用テキスト」                │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ 添付ファイル                 │  ← あれば表示
│                                 │
│  ┌───────────────────────────┐  │
│  │ 📄 目標設定ワークシート     │  │  ← 外部リンク（Google Docs等）
│  │    Google Docs で開く  ↗   │  │
│  └───────────────────────────┘  │
│  ┌───────────────────────────┐  │
│  │ 📋 自己分析テンプレート     │  │
│  │    Google Forms で開く ↗   │  │
│  └───────────────────────────┘  │
│                                 │
├─────────────────────────────────┤
│                                 │  ← BottomNav 非表示
│                                 │     （詳細ページでは非表示）
└─────────────────────────────────┘
```

**各要素の仕様:**

| 要素 | 仕様 |
|------|------|
| **カテゴリバッジ** | pill形状。背景: カテゴリの`背景色`、テキスト: カテゴリの`カラー`。左にアイコン(14px) + ラベル(12px) |
| **所要時間** | `Clock` アイコン(14px) + `{n}分` テキスト。色: `--color-text-secondary` |
| **動画埋め込み** | アスペクト比 16:9 (`aspect-video`)。角丸8px。YouTube は `iframe` で埋め込み。Loom も `iframe` 埋め込み。`media[]` が空なら非表示 |
| **本文** | padding: 16px。HTMLをレンダリング。`prose` 相当のタイポグラフィ。見出し(h2,h3)、段落(p)、リスト(ul,ol)、太字(strong)、リンク(a)、引用(blockquote) をサポート。リンクは `--color-primary` で表示 |
| **添付ファイル** | カードリスト形式。左に `FileText` アイコン。ラベル + サブテキスト（「Google Docs で開く」等）。右端に `ExternalLink` アイコン(16px)。タップで外部URLを新タブで開く (`target="_blank"`) |

**本文のタイポグラフィ（prose スタイル）:**

| HTML要素 | スタイル |
|---------|---------|
| `h2` | 18px / 700 / margin-top 24px |
| `h3` | 16px / 600 / margin-top 20px |
| `p` | 14px / 400 / 行高 1.75 / margin-bottom 12px |
| `ul, ol` | 14px / padding-left 20px / margin-bottom 12px |
| `strong` | 600 weight |
| `a` | `--color-primary` / underline on hover |
| `blockquote` | 左ボーダー 3px `--color-border` / padding-left 12px / `--color-text-secondary` |

---

### 3-4. Schedule（予定）

**目的:** グループレッスン・個別コーチングの予定を時系列で閲覧する。

```
┌─────────────────────────────────┐
│  予定                            │  ← PageHeader
├─────────────────────────────────┤
│                                 │
│  ■ 今後の予定                   │  ← セクション見出し
│                                 │
│  ── 2月 ──────────────────────  │  ← 月セパレーター
│                                 │
│  ┌───────────────────────────┐  │
│  │ 15   グループレッスン        │  │  ← イベントカード
│  │ 土   LINE実践テクニック      │  │
│  │      13:00 - 14:00          │  │
│  │      佐藤コーチ              │  │
│  │                [Zoom参加 ↗] │  │  ← 外部リンクボタン
│  └───────────────────────────┘  │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 18   個別コーチング          │  │
│  │ 火   プロフィール添削        │  │
│  │      19:00 - 19:30          │  │
│  │      佐藤コーチ              │  │
│  │                [Zoom参加 ↗] │  │
│  └───────────────────────────┘  │
│                                 │
│  ── 3月 ──────────────────────  │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 1    ワークショップ          │  │
│  │ 土   ファッション講座        │  │
│  │      …                      │  │
│  └───────────────────────────┘  │
│  …                              │
│                                 │
│  ■ 過去の予定                   │  ← 折りたたみ（初期: 閉）
│  ┌───────────────────────────┐  │
│  │ ▶ 過去の予定を表示（2件）    │  │  ← タップで展開
│  └───────────────────────────┘  │
│                                 │
├─────────────────────────────────┤
│  [ホーム] [教材] [予定] [FAQ] [MP]│
└─────────────────────────────────┘
```

**各要素の仕様:**

| 要素 | 仕様 |
|------|------|
| **月セパレーター** | `{n}月` テキスト(12px/600/`--color-text-secondary`)。左右にライン (`--color-border`) |
| **イベントカード** | 左カラム: 日付(24px/700) + 曜日(12px/400)、幅48px、テキスト中央配置。右カラム: タイプバッジ + タイトル + 時間 + コーチ名 |
| **タイプバッジ** | pill形状。グループ=`blue`背景、個別=`green`背景、ワークショップ=`orange`背景。テキスト11px/500 |
| **Zoomボタン** | 小ボタン (sm)。`Video` アイコン + 「Zoom参加」テキスト。`--color-primary`。右下配置。`target="_blank"` |
| **過去の予定** | デフォルト折りたたみ。`ChevronDown` アイコン付き。展開時は同じカード形式だが全体の不透明度を70%に |

**セッションタイプの表示マッピング:**

| type値 | 表示ラベル | バッジ色 |
|--------|----------|---------|
| `coaching` | 個別コーチング | `#10b981` (green) / `#ecfdf5` |
| `group` | グループレッスン | `#3b82f6` (blue) / `#eff6ff` |
| `workshop` | ワークショップ | `#f59e0b` (amber) / `#fffbeb` |

---

### 3-5. FAQ（よくある質問）

**目的:** カテゴリ別にFAQをアコーディオンで表示。問い合わせ先の案内。

```
┌─────────────────────────────────┐
│  よくある質問                    │  ← PageHeader
├─────────────────────────────────┤
│                                 │
│  [すべて] [一般] [料金]          │  ← フィルタ
│  [技術] [コーチング]             │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ┌───────────────────────────┐  │
│  │ Q. プログラムの期間は？    ▼│  │  ← アコーディオン（閉）
│  └───────────────────────────┘  │
│  ┌───────────────────────────┐  │
│  │ Q. どんな人が対象ですか？  ▼│  │
│  └───────────────────────────┘  │
│  ┌───────────────────────────┐  │
│  │ Q. 支払い方法は？         ▲│  │  ← アコーディオン（開）
│  │                           │  │
│  │ A. クレジットカード（Visa, │  │
│  │ Mastercard, AMEX）、銀行  │  │
│  │ 振込に対応しています。     │  │
│  │ 分割払いもご相談ください。 │  │
│  └───────────────────────────┘  │
│  …                              │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ お問い合わせ                 │  ← セクション
│                                 │
│  ┌───────────────────────────┐  │
│  │ 💬  LINEで問い合わせ       │  │  ← LINE リンク
│  │     @kurouma-support       │  │
│  └───────────────────────────┘  │
│  ┌───────────────────────────┐  │
│  │ ✉️  メールで問い合わせ      │  │  ← メールリンク
│  │     support@kurouma-...    │  │
│  └───────────────────────────┘  │
│                                 │
│  通常24時間以内にご返信します    │  ← 補足テキスト
│                                 │
├─────────────────────────────────┤
│  [ホーム] [教材] [予定] [FAQ] [MP]│
└─────────────────────────────────┘
```

**各要素の仕様:**

| 要素 | 仕様 |
|------|------|
| **フィルタバー** | Lessons ページと同仕様。sticky。 |
| **アコーディオン** | カード形式。Q行: 15px/500 + `ChevronDown` (開時は`ChevronUp`)。A行: 14px/400 / `--color-text-secondary`。アニメーション: 高さ transition 200ms ease |
| **お問い合わせカード** | 左にアイコン(20px)。ラベル(15px/500) + サブテキスト(12px/`--color-text-secondary`)。タップで外部アプリ起動（LINE: URLスキーム、メール: `mailto:`） |
| **補足テキスト** | 中央配置。12px/400 / `--color-text-tertiary` |

---

### 3-6. Profile（マイページ）

**目的:** ユーザー情報の閲覧。編集機能なし。

```
┌─────────────────────────────────┐
│                                 │
│  ┌──────────────────────────┐   │
│  │                          │   │  ← プロフィールヘッダー
│  │      ┌────┐              │   │     背景: --color-primary
│  │      │ 田 │              │   │     または
│  │      │ 中 │              │   │     グラデーション
│  │      └────┘              │   │
│  │   田中 太郎               │   │
│  │   tanaka@example.com     │   │
│  │                          │   │
│  └──────────────────────────┘   │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ コース情報                   │  ← セクション
│                                 │
│  ┌───────────────────────────┐  │
│  │  コース名                  │  │
│  │  恋愛コンサルプログラム     │  │
│  ├───────────────────────────┤  │
│  │  担当コーチ                │  │
│  │  佐藤コーチ                │  │
│  ├───────────────────────────┤  │
│  │  入会日                    │  │
│  │  2025年11月1日              │  │
│  └───────────────────────────┘  │
│                                 │
├─────────────────────────────────┤
│                                 │
│  ■ サポート                    │  ← セクション
│                                 │
│  ┌───────────────────────────┐  │
│  │  ❓ よくある質問        →  │  │  ← /faq へ
│  ├───────────────────────────┤  │
│  │  💬 LINEで問い合わせ    →  │  │  ← 外部リンク
│  └───────────────────────────┘  │
│                                 │
├─────────────────────────────────┤
│                                 │
│  [ログアウト]                    │  ← テキストボタン（danger色）
│                                 │
├─────────────────────────────────┤
│  [ホーム] [教材] [予定] [FAQ] [MP]│
└─────────────────────────────────┘
```

**各要素の仕様:**

| 要素 | 仕様 |
|------|------|
| **プロフィールヘッダー** | 高さ: 180px。背景: `--color-primary` のグラデーション（上:`#3b82f6` → 下:`#2563eb`）。白テキスト |
| **アバター** | 64x64px 丸型。白枠(3px)。イニシャル表示（将来: 画像対応）。背景: 白30%透過 |
| **名前** | 18px / 700 / 白 |
| **メール** | 13px / 400 / 白70%透過 |
| **コース情報カード** | グループ化されたリスト形式。各行: ラベル(12px/`--color-text-secondary`) + 値(15px/500)。行間をボーダーで区切り |
| **サポートリンク** | リスト形式。左にアイコン + ラベル。右に `ChevronRight`。タップ領域: 行全体 |
| **ログアウトボタン** | テキストボタン。色: `#ef4444`(red)。中央配置。タップでログアウト確認ダイアログ |

---

## 4. データ構造（コンテンツ閲覧用）

進捗管理を除外したシンプルなデータ構造。

```
User（表示用）
├── id: string
├── name: string               "田中太郎"
├── email: string              "tanaka@example.com"
├── avatarUrl?: string
├── enrolledAt: string         "2025-11-01"
├── courseName: string         "恋愛コンサルプログラム"  ← NEW
└── coachName: string          "佐藤コーチ"

Lesson（教材）
├── id: string
├── category: LessonCategory
├── title: string
├── description: string        一覧用の短い説明文
├── durationMinutes: number
├── body: string               本文HTML（Google Docs内容の埋め込み）
├── media: MediaEmbed[]        動画埋め込み（0個以上）
│   ├── type: 'youtube' | 'loom'
│   └── url: string
├── attachments: Attachment[]  添付ファイル（0個以上）
│   ├── title: string
│   ├── url: string
│   └── type: 'google-docs' | 'google-forms' | 'google-sheets' | 'external'
├── featured: boolean          ホームの「おすすめ」に表示するか
└── sortOrder: number

LessonCategory = 'mindset' | 'communication' | 'fashion' | 'dating' | 'self-improvement'

ScheduleEvent（予定）
├── id: string
├── title: string
├── description?: string
├── date: string               "2026-02-15"
├── startTime: string          "13:00"
├── endTime: string            "14:00"
├── type: SessionType
├── coachName: string
└── zoomUrl: string

SessionType = 'coaching' | 'group' | 'workshop'

FaqItem（FAQ）
├── id: string
├── question: string
├── answer: string
├── category: FaqCategory
└── sortOrder: number

FaqCategory = 'general' | 'billing' | 'technical' | 'coaching'

ContactInfo（問い合わせ先）
├── lineUrl: string
├── lineId: string
├── email: string
└── responseTime: string
```

### 旧構造との差分

| 変更点 | 旧 | 新 |
|--------|-----|-----|
| User に `courseName` 追加 | なし | `"恋愛コンサルプログラム"` |
| User の `currentPhase` | あり | **削除**（進捗管理対象外） |
| User の `nameKana` | あり | **削除**（表示不要） |
| Lesson の `phase`, `moduleIndex` | あり | **削除**（カテゴリ分類に変更） |
| Lesson の `contentHtml` | あり | `body` にリネーム |
| Lesson の `videoUrl` (単数) | あり | `media[]` (複数) に拡張 |
| Lesson に `featured` 追加 | なし | ホーム表示用フラグ |
| Lesson に `attachments` 拡張 | 簡易 | `type` フィールド追加 |
| LessonProgress | あり | **削除**（進捗管理対象外） |
| TaskTemplate / UserTask | あり | **削除**（タスク管理対象外） |
| TaskContext | あり | **削除** |

---

## 5. コンポーネント一覧

### 5-1. レイアウト

| コンポーネント | ファイル | 変更 |
|--------------|---------|------|
| AppLayout | `layout/AppLayout.tsx` | 既存流用 |
| BottomNav | `layout/BottomNav.tsx` | **改修**: 5タブの内容変更 |
| PageHeader | `layout/PageHeader.tsx` | 既存流用 |
| PageContainer | `layout/PageContainer.tsx` | 既存流用 |

### 5-2. UI（汎用）

| コンポーネント | ファイル | 変更 |
|--------------|---------|------|
| Card | `ui/Card.tsx` | 既存流用 |
| Badge | `ui/Badge.tsx` | 既存流用 |
| Button | `ui/Button.tsx` | 既存流用 |
| Avatar | `ui/Avatar.tsx` | 既存流用 |
| LoadingSpinner | `ui/LoadingSpinner.tsx` | 既存流用 |
| EmptyState | `ui/EmptyState.tsx` | 既存流用 |
| ConfirmDialog | `ui/ConfirmDialog.tsx` | **新規**: ログアウト確認用 |

### 5-3. Feature（機能固有）

| コンポーネント | ファイル | 変更 |
|--------------|---------|------|
| CategoryChip | `features/CategoryChip.tsx` | **新規**: ホームのカテゴリ導線 |
| LessonCard | `features/LessonCard.tsx` | **改修**: 進捗表示を削除、メタ情報変更 |
| CategoryFilter | `features/CategoryFilter.tsx` | **改名**: 旧PhaseFilter をカテゴリ用に |
| VideoEmbed | `features/VideoEmbed.tsx` | **新規**: YouTube/Loom iframe 埋め込み |
| ArticleBody | `features/ArticleBody.tsx` | **新規**: HTML本文レンダリング (prose) |
| AttachmentList | `features/AttachmentList.tsx` | **新規**: 添付ファイルリスト |
| ScheduleCard | `features/ScheduleCard.tsx` | **改修**: 左カラム日付レイアウトに |
| MonthSeparator | `features/MonthSeparator.tsx` | **新規**: 月区切り表示 |
| FaqAccordion | `features/FaqAccordion.tsx` | 既存流用 |
| ContactCard | `features/ContactCard.tsx` | **新規**: 問い合わせ先カード |
| ProfileHeader | `features/ProfileHeader.tsx` | **新規**: プロフィール上部 |
| InfoList | `features/InfoList.tsx` | **新規**: ラベル+値のリスト表示 |
| MenuLink | `features/MenuLink.tsx` | **新規**: アイコン+ラベル+矢印のリンク行 |

### 5-4. 削除対象

| コンポーネント | 理由 |
|--------------|------|
| ProgressSummary | 進捗管理対象外 |
| ProgressBar | 進捗管理対象外 |
| NextActionCard | 進捗管理対象外 |
| TaskCard | タスク管理対象外 |
| PhaseFilter | CategoryFilter に置き換え |
| Input | フォーム不要（編集機能なし） |

### 5-5. ページ

| ページ | ファイル | 変更 |
|--------|---------|------|
| HomePage | `pages/HomePage.tsx` | **全面改修**: カテゴリ案内 + おすすめ + 予定 |
| LessonsPage | `pages/LessonsPage.tsx` | **改修**: カテゴリフィルタ方式に |
| LessonDetailPage | `pages/LessonDetailPage.tsx` | **改修**: 動画埋め込み + 本文 + 添付 |
| SchedulePage | `pages/SchedulePage.tsx` | **改修**: 月区切り + 折りたたみ |
| FaqPage | `pages/FaqPage.tsx` | 軽微な改修 |
| ProfilePage | `pages/ProfilePage.tsx` | **全面改修**: コース情報 + サポートリンク |
| NotFoundPage | `pages/NotFoundPage.tsx` | 既存流用 |

**削除ページ:**
| ページ | 理由 |
|--------|------|
| TasksPage | タスク管理対象外 |
| LoginPage | スコープ外（モック認証維持、ページ自体は残す） |

---

## 6. ルーティング定義（最終）

```
/              → HomePage          BottomNav: 表示  Header: なし（カスタム）
/lessons       → LessonsPage       BottomNav: 表示  Header: 「教材」
/lessons/:id   → LessonDetailPage  BottomNav: 非表示 Header: 教材名 + ←
/schedule      → SchedulePage      BottomNav: 表示  Header: 「予定」
/faq           → FaqPage           BottomNav: 表示  Header: 「よくある質問」
/profile       → ProfilePage       BottomNav: 表示  Header: なし（カスタム）
*              → NotFoundPage      BottomNav: 表示  Header: なし
```

---

## 7. 将来の拡張ポイント（今回は実装しない）

設計上、以下の拡張が容易なように構造を維持する:

| 拡張 | 影響箇所 |
|------|---------|
| 学習進捗（完了マーク） | `LessonProgress` 型復活 + LessonCard に状態表示追加 |
| タスク管理 | `UserTask` 型復活 + TasksPage 復活 + BottomNav にタブ追加 |
| フェーズ管理 | `Lesson` に `phase` フィールド復活 + フィルタ追加 |
| オンボーディング | `/onboarding` ページ追加 + 初回判定ロジック |
| 通知機能 | ヘッダーにベルアイコン + 通知一覧ページ |
| リアル認証 | AuthContext を Firebase/Supabase に差し替え |
